{
    // Error is located at bottom of hover:
    // See https://github.com/microsoft/vscode/issues/73120

    // Unsupported: virtualedit+=all
    // See https://github.com/microsoft/vscode/issues/13960

    // Unsupported: formatoptions+=r
    // See https://github.com/Microsoft/vscode/issues/26694

    // UI ..................................................................{{{1

    // Theme
    "workbench.colorTheme": "Visual Studio Light",
    "workbench.iconTheme": "vsc-jetbrains-icons-enhanced",

    // Syntax scheme
    "editor.tokenColorCustomizations": {
        "textMateRules": [
            {
                "scope": [
                    "keyword",
                    "keyword.control",
                    "keyword.operator",
                    "keyword.operator.new",
                    "keyword.operator.assignment",
                    "keyword.operator.arithmetic",
                    "keyword.operator.logical",
                    "keyword.other",
                ],
                "settings": { "fontStyle": "bold" }
            },
            {
                "scope": [
                    "entity.name.function",
                ],
                "settings": { "fontStyle": "" }
            },
        ],
    },
    "editor.accessibilitySupport": "off",

    // File Explorer
    "explorer.compactFolders": true, // Collapse empty folders like for Java pkgs
    "workbench.tree.renderIndentGuides": "always",
    "workbench.list.automaticKeyboardNavigation": false,

    // Window
    "window.menuBarVisibility": "compact",
    "workbench.activityBar.visible": true,
    "window.title": "${dirty}${activeEditorShort}${separator}${rootName}${separator}Code",
    "files.simpleDialog.enable": true,
    "workbench.editor.enablePreview": false,
    "editor.scrollbar.horizontal": "hidden",
    "editor.scrollbar.vertical": "hidden",
    "editor.hideCursorInOverviewRuler": false,

    // Editor
    "editor.fontFamily": "FiraCode Nerd Font Mono",
    "editor.fontLigatures": false,
    "editor.fontSize": 11,
    "window.newWindowDimensions": "maximized",
    "editor.rulers": [80],
    "editor.minimap.enabled": false,
    "editor.cursorSmoothCaretAnimation": "on",
    "editor.cursorStyle": "underline",

    // Gutter
    "editor.lineNumbers": "on",
    "git.decorations.enabled": true,
    "editor.glyphMargin": true, // Show breakpoints
    "editor.lineDecorationsWidth": 0, // undocumented
    "editor.lineNumbersMinChars": 0,  // undocumented

    // Terminal
    "terminal.integrated.tabs.location": "left",
    "terminal.integrated.cursorBlinking": true,
    "terminal.integrated.cursorStyle": "underline",

    // Tabs
    "workbench.editor.highlightModifiedTabs": true,
    "workbench.editor.labelFormat": "short",
    "workbench.editor.tabCloseButton": "right",
    "workbench.editor.untitled.hint": "hidden",
    "workbench.editor.untitled.labelFormat": "name",

    // Behaviour ...........................................................{{{1

    // Startup
    "files.hotExit": "onExitAndWindowClose",
    "workbench.startupEditor": "newUntitledFile",
    "window.restoreWindows": "none",
    "files.restoreUndoStack": true,
    "workbench.editor.navigationScope": "editorGroup",

    // File Explorer
    "explorer.copyRelativePathSeparator": "/", // Always use unix-style path separators
    "workbench.list.defaultFindMode": "filter",
    "workbench.list.typeNavigationMode": "trigger",
    "explorer.confirmDelete": true,
    "explorer.confirmDragAndDrop": true,

    // Window
    "workbench.commandPalette.preserveInput": true,
    "workbench.quickOpen.preserveInput": true,
    "workbench.settings.openDefaultKeybindings": true,

    // Editor
    "editor.scrollBeyondLastLine": false,
    "editor.insertSpaces": true,
    "editor.tabSize": 4,
    //"editor.autoClosingBrackets": "never",
    //"editor.autoClosingQuotes": "never",
    "editor.wordWrap": "off",
    "editor.cursorSurroundingLines": 10,
    //"editor.wordSeparators": "/\\()\"':,.;<>~!@#$%^&*|+=[]{}`?-",
    "editor.comments.ignoreEmptyLines": false,

    // Make editor groups act like splits
    // Limit has to be at least 2 for workbench.action.previousEditorInGroup to
    // work, also if not, VSCodeVim's :new falsely replaces the current split.
    // So when closing a *split*, the editor group (containing two editors)
    // should be closed instead of just an editor.
    "workbench.editor.limit.enabled": true,
    "workbench.editor.limit.perEditorGroup": true,
    "workbench.editor.limit.value": 2,
    "workbench.editor.showTabs": false, // Make editor groups look like splits

    // Terminal
    "terminal.integrated.fontSize": 11,
    "terminal.integrated.shell.windows": "pwsh.exe",

    // Text encoding
    "files.autoGuessEncoding": true,
    "files.autoSave": "onFocusChange",
    "files.eol": "\n",
    "files.insertFinalNewline": true,
    "files.trimFinalNewlines": true,
    "files.trimTrailingWhitespace": true,

    // Debugging
    "debug.console.closeOnEnd": false,
    "debug.openExplorerOnEnd": true,
    "debug.internalConsoleOptions": "openOnSessionStart",
    "debug.openDebug": "openOnDebugBreak",
    "debug.showInStatusBar": "always",
    "debug.toolBarLocation": "floating",

    // Suggestions
    //"editor.wordBasedSuggestions": false,
    //"editor.suggest.showWords": false,
    "editor.acceptSuggestionOnEnter": "on",
    "editor.quickSuggestions": {
        "other": false,
        "comments": false,
        "strings": false
    },
    "editor.suggest.localityBonus": true,
    "editor.suggest.preview": true,
    "editor.suggestOnTriggerCharacters": false,
    "editor.suggestSelection": "first",
    "editor.tabCompletion": "off",

    // Search editor
    "search.mode": "reuseEditor",

    // Disable nags
    "update.mode": "manual",
    "extensions.ignoreRecommendations": false,
    "git.openRepositoryInParentFolders": "never",
    "powershell.promptToUpdatePowerShell": false,
    "telemetry.telemetryLevel": "off",
    "redhat.telemetry.enabled": false,

    // Dance ...............................................................{{{1

    "dance.modes": {
        "normal": {
            "lineNumbers": "inherit",
            "cursorStyle": "block",
            "selectionBehavior": "character",
        },
        "insert": {
            "lineNumbers": "inherit",
            "cursorStyle": "underline",
            "selectionBehavior": "character",
        },
        "input": {
            "inheritFrom": "insert",
        },
        "select": {
            "inheritFrom": "normal",
            "onLeaveMode": [
                [
                    ".selections.save",
                    {
                        "register": " ^",
                        "style": {
                            "borderColor": "$editor.selectionBackground",
                            "borderStyle": "solid",
                            "borderWidth": "2px",
                            "borderRadius": "1px"
                        },
                        "until": [
                            ["mode-did-change", { "include": ["normal", "select"] }],
                            ["selections-did-change"]
                        ]
                    }
                ]
            ],
        },
    },

    "dance.menus": {
        "goto-hx": {
            "title": "Goto",
            "items": {
                "g": { "text": "line number <n> else file start", "command": "dance.select.lineStart", "args": [{ "count": 1          }]     },
                "e": { "text": "last line",                       "command": "dance.select.lineStart", "args": [{ "count": 2147483647 }]     },
                "f": { "text": "files in selection",              "command": "editor.action.openLink"                                        },
                "h": { "text": "line start",                      "command": "dance.select.lineStart"                                        },
                "l": { "text": "line end",                        "command": "dance.select.lineEnd"                                          },
                "s": { "text": "first non-blank in line",         "command": "dance.select.lineStart", "args": [{ "skipBlank": true }]       },
                "d": { "text": "definition",                      "command": "editor.action.revealDefinition"                                },
                "y": { "text": "type definition",                 "command": "editor.action.goToTypeDefinition"                              },
                "r": { "text": "references",                      "command": "editor.action.goToReferences"                                  },
                "i": { "text": "implementation",                  "command": "editor.action.goToImplementation"                              },
                "t": { "text": "window top",                      "command": "dance.select.firstVisibleLine"                                 },
                "c": { "text": "window center",                   "command": "dance.select.middleVisibleLine"                                },
                "b": { "text": "window bottom",                   "command": "dance.select.lastVisibleLine"                                  },
                "a": { "text": "last accessed file",              "command": "workbench.action.previousEditorInGroup"                        },
                "m": { "text": "last modified file",              "command": "???"                                                           },
                "p": { "text": "previous buffer",                 "command": "workbench.action.previousEditor"                               },
            }
        },

        "match-hx": {
            "title": "Match",
            "items": {
                "m": { "text": "Goto matching bracket", "command": "dance.run", "args": [{ "code": [
                    "await vscode.commands.executeCommand('dance.seek.enclosing');",
                    "if (Context.current.mode.name !== 'select') {",
                        "await vscode.commands.executeCommand('dance.selections.reduce');",
                    "}",
                ] }] },
                "s": { "text": "Surround add", "command": "dance.run", "args": [{ "code": [
                    "let pairs = ['()', '{}', '[]', '<>'];",
                    "let x = vscode.commands.executeCommand;",
                    "let c = await keypress(Context.current);",
                    "let p = pairs.find((p) => p.includes(c));",
                    "await x('dance.selections.save');",
                    "Selections.updateWithFallbackByIndex((i, sel) => new vscode.Selection(sel.anchor, Positions.at(sel.active.line, sel.active.character + !sel.isReversed)));",
                    "await x('editor.action.insertSnippet', { snippet: (p?.at(0) || c) + '${TM_SELECTED_TEXT}' + (p?.at(1) || c) });",
                    "await x('dance.selections.restore');",
                ] }] },
                "r": { "text": "Surround replace", "command": "dance.run", "args": [{ "code": [
                    "let pairs = ['()', '{}', '[]', '<>'];",
                    "let x = vscode.commands.executeCommand;",
                    "let c = await keypress(Context.current);",
                    "let p = pairs.find((p) => p.includes(c));",
                    "let s = Selections.mapByIndex((_i, sel) => sel);",
                    "await x('dance.selections.save');",
                    "await x('dance.selections.faceBackward');",
                    "await x('dance.seek.included.extend.backward', { input: p?.at(0) || c });",
                    "await x('dance.selections.changeDirection');",
                    "Selections.updateWithFallbackByIndex((i, sel) => new vscode.Selection(sel.anchor, Positions.at(sel.active.line, sel.active.character - !sel.isReversed)));",
                    "await x('dance.seek.included.extend', { input: p?.at(1) || c });",
                    "await x('dance.selections.save', { register: 'surround' });",
                    "await x('dance.selections.reduce.edges');",
                    "c = await keypress(Context.current);",
                    "p = pairs.find((p) => p.includes(c));",
                    "await x('dance.edit.delete');",
                    "await x('dance.selections.restore', { register: 'surround' });",
                    "await x('dance.select.right.extend');",
                    "await x('editor.action.insertSnippet', { snippet: (p?.at(0) || c) + '${TM_SELECTED_TEXT}' + (p?.at(1) || c) });",
                    "await x('dance.selections.restore');",
                    "Selections.updateWithFallbackByIndex((i, sel) => s[i]);",
                ] }] },
                "d": { "text": "Surround delete", "command": "dance.run", "args": [{ "code": [
                    "let pairs = ['()', '{}', '[]', '<>'];",
                    "let x = vscode.commands.executeCommand;",
                    "let c = await keypress(Context.current);",
                    "let p = pairs.find((p) => p.includes(c));",
                    "let s = Selections.mapByIndex((_i, sel) => sel);",
                    "await x('dance.selections.save');",
                    "await x('dance.selections.faceBackward');",
                    "await x('dance.seek.included.extend.backward', { input: p?.at(0) || c });",
                    "await x('dance.selections.changeDirection');",
                    "Selections.updateWithFallbackByIndex((i, sel) => new vscode.Selection(sel.anchor, Positions.at(sel.active.line, sel.active.character - !sel.isReversed)));",
                    "await x('dance.seek.included.extend', { input: p?.at(1) || c });",
                    "await x('dance.selections.reduce.edges');",
                    "await x('dance.edit.delete');",
                    "await x('dance.selections.restore');",
                    "Selections.updateWithFallbackByIndex((i, _sel) => new vscode.Selection(Positions.at(s[i].anchor.line, s[i].anchor.character - 1), Positions.at(s[i].active.line, s[i].active.character - 1)));",
                ] }] },
                "a": { "text": "Select around object", "command": "dance.openMenu", "args": [{ "menu": "object-hx", "title": "Match around"                                             }] },
                "i": { "text": "Select inside object", "command": "dance.openMenu", "args": [{ "menu": "object-hx", "title": "Match inside", "pass": [{ "inner": true, "open": false }] }] },
                // Not in helix yet: https://github.com/helix-editor/helix/issues/1810
                " ": { "text": "Select by indentation", "command": "dance.seek.object", "args": [{ "input": "(?#predefined=indent)" }] },
            },
        },

        "object-hx": {
            "items": {
                "w":  { "text": "Word",                               "command": "dance.seek.object", "args": [{ "input": "[\\p{L}_\\d]+(?<after>[^\\S\\n]+)"     }] },
                "W":  { "text": "WORD",                               "command": "dance.seek.object", "args": [{ "input": "[\\S]+(?<after>[^\\S\\n]+)"            }] },
                "p":  { "text": "Paragraph",                          "command": "dance.seek.object", "args": [{ "input": "(?#predefined=paragraph)"              }] },
                "t":  { "text": "Type definition",                    "command": "dance.seek.object", "args": [{ "input": "???"                                   }] },
                "f":  { "text": "Function",                           "command": "dance.seek.object", "args": [{ "input": "???"                                   }] },
                "a":  { "text": "Argument/parameter",                 "command": "dance.seek.object", "args": [{ "input": "(?#predefined=argument)"               }] },
                "c":  { "text": "Comment",                            "command": "dance.seek.object", "args": [{ "input": "???"                                   }] },
                "T":  { "text": "Test",                               "command": "dance.seek.object", "args": [{ "input": "???"                                   }] },
                "m":  { "text": "Closest surrounding pair to cursor", "command": "dance.seek.enclosing"                                                              },
                "()": { "text": "Parentheses",                        "command": "dance.seek.object", "args": [{ "input": "\\((?#inner)\\)"                       }] },
                "{}": { "text": "Braces",                             "command": "dance.seek.object", "args": [{ "input": "\\{(?#inner)\\}"                       }] },
                "[]": { "text": "Brackets",                           "command": "dance.seek.object", "args": [{ "input": "\\[(?#inner)\\]"                       }] },
                "<>": { "text": "Angle brackets",                     "command": "dance.seek.object", "args": [{ "input": "<(?#inner)>"                           }] },
                "\"": { "text": "Double quotes",                      "command": "dance.seek.object", "args": [{ "input": "(?#noescape)\"(?#inner)(?#noescape)\"" }] },
                "'":  { "text": "Single quotes",                      "command": "dance.seek.object", "args": [{ "input": "(?#noescape)'(?#inner)(?#noescape)'"   }] },
                "`":  { "text": "Grave quotes",                       "command": "dance.seek.object", "args": [{ "input": "(?#noescape)`(?#inner)(?#noescape)`"   }] },
                " ":  { "text": "Whitespace",                         "command": "dance.seek.object", "args": [{ "input": "[ \t](?#inner)[ \t]"                   }] },
            },
        },

        "view-hx": {
            "title": "View",
            "items": {
                "cz": { "text": "Align view center", "command": "dance.view.line", "args": [{ "at": "center" }]                                },
                "t":  { "text": "Align view top",    "command": "dance.view.line", "args": [{ "at": "top"    }]                                },
                "b":  { "text": "Align view bottom", "command": "dance.view.line", "args": [{ "at": "bottom" }]                                },
                "m":  { "text": "Align view middle", "command": "???"                                                                          },
                "k":  { "text": "Scroll view up",    "command": "editorScroll", "args": [{ "by": "line", "revealCursor": true, "to": "up"   }] },
                "j":  { "text": "Scroll view down",  "command": "editorScroll", "args": [{ "by": "line", "revealCursor": true, "to": "down" }] },
                /*
                "C-b": { "text": "Move page up",        "command": "dance.select.vertically", "args": [{ "direction": -1, "by": "page"     }] },
                "C-f": { "text": "Move page down",      "command": "dance.select.vertically", "args": [{ "direction":  1, "by": "page"     }] },
                "C-u": { "text": "Move half page up",   "command": "dance.select.vertically", "args": [{ "direction": -1, "by": "halfPage" }] },
                "C-d": { "text": "Move half page down", "command": "dance.select.vertically", "args": [{ "direction":  1, "by": "halfPage" }] },
                */
                "/": { "text": "Search for regex pattern",         "command": "dance.search"          },
                "?": { "text": "Reverse search for regex pattern", "command": "dance.search.backward" },
                "n": { "text": "Select next search match",         "command": "dance.search.next"     },
                "N": { "text": "Select previous search match",     "command": "dance.search.previous" },
            },
        },

        "window-hx": {
            "title": "View",
            "items": {
                "w": { "text": "Goto next window",                              "command": "workbench.action.focusNextGroup"                       },
                "s": { "text": "Horizontal bottom split",                       "command": "workbench.action.splitEditorDown"                      },
                "v": { "text": "Vertical right split",                          "command": "workbench.action.splitEditorRight"                     },
                "t": { "text": "Transpose splits",                              "command": "workbench.action.toggleEditorGroupLayout"              },
                "f": { "text": "Goto files in selection (hsplit)",              "command": "???"                                                   },
                "F": { "text": "Goto files in selection (vsplit)",              "command": "???"                                                   },
                "q": { "text": "Close window",                                  "command": "workbench.action.closeEditorsAndGroup"                 },
                "o": { "text": "Close all other windows (Current window only)", "command": "dance.run", "args": [{ "commands": ["workbench.action.focusActiveEditorGroup", "workbench.action.closeEditorsInOtherGroups"] }] },
                "h": { "text": "Jump to the split on the left",                 "command": "workbench.action.focusLeftGroup"                       },
                "j": { "text": "Jump to the split below",                       "command": "workbench.action.focusBelowGroup"                      },
                "k": { "text": "Jump to the split above",                       "command": "workbench.action.focusAboveGroup"                      },
                "l": { "text": "Jump to the split to the right",                "command": "workbench.action.focusRightGroup"                      },
                "L": { "text": "Swap with the split to the right",              "command": "workbench.action.moveActiveEditorGroupRight"           },
                "K": { "text": "Swap with the split above",                     "command": "workbench.action.moveActiveEditorGroupUp"              },
                "H": { "text": "Swap with the split to the left",               "command": "workbench.action.moveActiveEditorGroupLeft"            },
                "J": { "text": "Swap with the split below",                     "command": "workbench.action.moveActiveEditorGroupDown"            },
                "n": { "text": "New split scratch buffer",                      "command": "dance.openMenu", "args": [{ "menu": "new-window-hx" }] },
            },
        },

        "new-window-hx": {
            "title": "New split scratch buffer",
            "items": {
                "s": { "text": "Horizontal bottom split scratch buffer", "command": "dance.run", "args": [{ "commands": ["workbench.action.splitEditorDown", "workbench.action.files.newUntitledFile" ] }] },
                "v": { "text": "Vertical right split scratch buffer",    "command": "dance.run", "args": [{ "commands": ["workbench.action.splitEditorRight", "workbench.action.files.newUntitledFile"] }] },
            },
        },

        "left-bracket-hx": {
            "title": "Left bracket",
            "items": {
                "d": { "text": "Goto previous diagnostic",      "command": "editor.action.marker.prevInFiles"       },
                "D": { "text": "Goto first diagnostic",         "command": "???"                                    },
                "g": { "text": "Goto previous change",          "command": "workbench.action.editor.previousChange" },
                "G": { "text": "Goto first change",             "command": "???"                                    },
                "f": { "text": "Goto previous function",        "command": "???"                                    },
                "t": { "text": "Goto previous type definition", "command": "???"                                    },
                "a": { "text": "Goto previous parameter",       "command": "???"                                    },
                "c": { "text": "Goto previous comment",         "command": "???"                                    },
                "T": { "text": "Goto previous test",            "command": "???"                                    },
                "p": { "text": "Goto previous paragraph",       "command": "???"                                    },
                " ": { "text": "Add newline above",             "command": "dance.edit.newLine.above"               },
            },
        },

        "right-bracket-hx": {
            "title": "Right bracket",
            "items": {
                "d": { "text": "Goto next diagnostic",      "command": "editor.action.marker.nextInFiles"   },
                "D": { "text": "Goto last diagnostic",      "command": "???"                                },
                "g": { "text": "Goto next change",          "command": "workbench.action.editor.nextChange" },
                "G": { "text": "Goto last change",          "command": "???"                                },
                "f": { "text": "Goto next function",        "command": "???"                                },
                "t": { "text": "Goto next type definition", "command": "???"                                },
                "a": { "text": "Goto next parameter",       "command": "???"                                },
                "c": { "text": "Goto next comment",         "command": "???"                                },
                "T": { "text": "Goto next test",            "command": "???"                                },
                "p": { "text": "Goto next paragraph",       "command": "???"                                },
                " ": { "text": "Add newline below",         "command": "dance.edit.newLine.below"           },
            },
        },

        "leader-hx": {
            "title": "Space",
            "items": {
                "f": { "text": "Open file picker",                              "command": "workbench.action.quickOpen"                                               },
                "F": { "text": "Open file picker at current working directory", "command": "???"                                                                      },
                "b": { "text": "Open buffer picker",                            "command": "workbench.action.showAllEditors"                                          },
                "j": { "text": "Open jumplist picker",                          "command": "???"                                                                      },
                "s": { "text": "Open symbol picker",                            "command": "workbench.action.gotoSymbol"                                              },
                "S": { "text": "Open workspace symbol picker",                  "command": "???"                                                                      },
                "d": { "text": "Open diagnostic picker",                        "command": "workbench.actions.view.problems"                                          },
                "D": { "text": "Open workspace diagnostic picker",              "command": "???"                                                                      },
                "a": { "text": "Perform code action",                           "command": "editor.action.quickFix"                                                   },
                "'": { "text": "Open last picker",                              "command": "???"                                                                      },
                "g": { "text": "Debug",                                         "command": "dance.openMenu", "args": [{ "menu": "debug-hx", "locked": true }]         },
                "w": { "text": "Window",                                        "command": "dance.openMenu", "args": [{ "menu": "window-hx" }]                        },
                "y": { "text": "Join and yank selections to clipboard",         "command": "dance.run", "args": [{ "commands": [["dance.selections.saveText", { "register": "dquote" }], ".modes.set.normal"] }] },
                "Y": { "text": "Yank main selection to clipboard",              "command": "dance.run", "args": [{ "commands": [["dance.selections.saveText", { "register": "dquote" }], ".modes.set.normal"] }] },
                "p": { "text": "Paste clipboard after selections",              "command": "dance.edit.insert", "args": [{ "handleNewLine": true, "where": "end"   }] },
                "P": { "text": "Paste clipboard before selections",             "command": "dance.edit.insert", "args": [{ "handleNewLine": true, "where": "start" }] },
                "R": { "text": "Replace selections by clipboard content",       "command": "dance.edit.insert", "args": [{ "register": "dquote" }]                    },
                "/": { "text": "Global search in workspace folder",             "command": "search.action.openEditor"                                                 },
                "k": { "text": "Show docs for item under cursor",               "command": "editor.action.showHover"                                                  },
                "r": { "text": "Rename symbol",                                 "command": "editor.action.rename"                                                     },
                "h": { "text": "Select symbol references",                      "command": "???"                                                                      },
                "?": { "text": "Open command palette",                          "command": "workbench.action.showCommands"                                            },
            }
        },

        "debug-hx": {
            "title": "Debug",
            "items": {
                "l": { "text": "Launch debug target",        "command": "workbench.action.debug.start"         },
                "b": { "text": "Toggle breakpoint",          "command": "editor.debug.action.toggleBreakpoint" },
                "c": { "text": "Continue program execution", "command": "workbench.action.debug.continue"      },
                "h": { "text": "Pause program execution",    "command": "workbench.action.debug.pause"         },
                "i": { "text": "Step in",                    "command": "workbench.action.debug.stepInto"      },
                "o": { "text": "Step out",                   "command": "workbench.action.debug.stepOut"       },
                "n": { "text": "Step to next",               "command": "workbench.action.debug.stepOver"      },
                "v": { "text": "List variables",             "command": "???"                                  },
                "t": { "text": "End debug session",          "command": "workbench.action.debug.stop"          },
                /*
                "C-c": { "text": "Edit breakpoint condition on current line",   "command": "???" },
                "C-l": { "text": "Edit breakpoint log message on current line", "command": "???" },
                */
                "s": { "text": "Switch",                        "command": "dance.openMenu", "args": [{ "menu": "debug-switch-hx" }] },
                "e": { "text": "Enable exception breakpoints",  "command": "???"                                                     },
                "E": { "text": "Disable exception breakpoints", "command": "???"                                                     },
            },
        },

        "debug-switch-hx": {
            "title": "Switch",
            "items": {
                "t": { "text": "current thread", "command": "???" },
                "f": { "text": "stack frame",    "command": "???" },
            },
        },

        "file-explorer": {
            "items": {
                "c": { "text": "Copy",     "command": "filesExplorer.copy"                                         },
                "d": { "text": "Delete",   "command": "moveFileToTrash"                                            },
                "n": { "text": "New ...",  "command": "dance.openMenu", "args": [{ "menu": "file-explorer-new"  }] },
                "o": { "text": "Open ...", "command": "dance.openMenu", "args": [{ "menu": "file-explorer-open" }] },
                "p": { "text": "Paste",    "command": "filesExplorer.paste"                                        },
                "r": { "text": "Rename",   "command": "renameFile"                                                 },
                "x": { "text": "Cut",      "command": "filesExplorer.cut"                                          },
                "y": { "text": "Yank ...", "command": "dance.openMenu", "args": [{ "menu": "file-explorer-yank" }] },
            },
        },

        "file-explorer-new": {
            "items": {
                "f": { "text": "File",      "command": "explorer.newFile"   },
                "d": { "text": "Directory", "command": "explorer.newFolder" },
            },
        },

        "file-explorer-open": {
            "items": {
                "o": { "text": "Open with ...",           "command": "explorer.openWith" },
                "r": { "text": "Reveal in file explorer", "command": "revealFileInOS"    },
            },
        },

        "file-explorer-yank": {
            "items": {
                "f": { "text": "File path",          "command": "copyFilePath"         },
                "r": { "text": "Relative file path", "command": "copyRelativeFilePath" },
            },
        },
    },

    // Language-specifics ..................................................{{{1

    // Dart/Flutter
    // See https://dartcode.org/docs/recommended-settings
	"[dart]": {
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
            "source.fixAll": true,
            "source.organizeImports": true,
        },
		"editor.selectionHighlight": false,
		"editor.suggest.snippetsPreventQuickSuggestions": false,
		"editor.tabCompletion": "onlySnippets",
	},
    "dart.allowAnalytics": false,
    "dart.autoImportCompletions": true,
    "dart.closingLabels": false,
    "dart.debugExternalPackageLibraries": false,
    "dart.debugSdkLibraries": false,
    "dart.enableCompletionCommitCharacters": false,
    "dart.flutterHotReloadOnSave": "allIfDirty",
    "dart.previewFlutterUiGuides": true,
    "dart.previewFlutterUiGuidesCustomTracking": true,
    "dart.triggerSignatureHelpAutomatically": true,
    "dart.warnWhenEditingFilesOutsideWorkspace": false,

    // C/C++
    "[c]": {
        "editor.formatOnSave": true,
    },
    "C_Cpp.clang_format_fallbackStyle": "{BasedOnStyle: LLVM, IndentWidth: 4}",

    // Calva
    "calva.prettyPrintingOptions": {
        "printEngine": "pprint",
        "enabled": true,
        "width": 120,
        "maxLength": 50,
    },
    "calva.paredit.defaultKeyMap": "strict",

    // Go
    "[go]": {
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
            "source.fixAll": true,
            "source.organizeImports": true,
        },
    },
    "gopls": {
        "formatting.gofumpt": true,
        "ui.completion.experimentalPostfixCompletions": true,
        "ui.completion.usePlaceholders": false,

        "completeUnimported": true,
        "completionDocumentation": true,
    },
    "go.toolsManagement.autoUpdate": true,
    "go.lintTool": "revive",
    "go.lintOnSave": "workspace",
    "go.useLanguageServer": true,

    // JavaScript/TypeScript
    "[javascript]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode",
    },
    "[typescript]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode",
    },
    "[javascriptreact]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode",
    },
    "[typescriptreact]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode",
    },
    "javascript.suggest.names": false,
    "javascript.updateImportsOnFileMove.enabled": "always",
    "typescript.updateImportsOnFileMove.enabled": "always",

    // JSON
    "[json]": {
        "editor.defaultFormatter": "vscode.json-language-features",
    },
    "[jsonc]": {
        "editor.defaultFormatter": "vscode.json-language-features",
    },

    // Rust
    "rust-analyzer.inlayHints.renderColons": true,
    "rust-analyzer.inlayHints.bindingModeHints.enable": false,
    "rust-analyzer.inlayHints.chainingHints.enable": false,
    "rust-analyzer.inlayHints.closingBraceHints.enable": true,
    "rust-analyzer.inlayHints.closingBraceHints.minLines": 49,
    "rust-analyzer.inlayHints.closureReturnTypeHints.enable": "with_block",
    "rust-analyzer.inlayHints.lifetimeElisionHints.enable": "skip_trivial",
    "rust-analyzer.inlayHints.lifetimeElisionHints.useParameterNames": true,
    "rust-analyzer.inlayHints.parameterHints.enable": false,
    "rust-analyzer.inlayHints.reborrowHints.enable": "never",
    "rust-analyzer.inlayHints.typeHints.enable": true,
    "rust-analyzer.inlayHints.typeHints.hideClosureInitialization": false,
    "rust-analyzer.inlayHints.typeHints.hideNamedConstructor": false,

    // Perl
    "[perl]": {
        "editor.formatOnSave": true,
    },

    // PowerShell
    "powershell.integratedConsole.showOnStartup": false,
    "powershell.codeFormatting.autoCorrectAliases": true,
    "powershell.codeFormatting.useCorrectCasing": true,
    "powershell.codeFormatting.avoidSemicolonsAsLineTerminators": true,
    "powershell.codeFormatting.useConstantStrings": false,
    "powershell.codeFormatting.preset": "OTBS",
    "powershell.codeFormatting.pipelineIndentationStyle": "IncreaseIndentationForFirstPipeline",
    "powershell.codeFormatting.whitespaceBeforeOpenBrace": true,
    "powershell.codeFormatting.whitespaceBeforeOpenParen": true,
    "powershell.codeFormatting.whitespaceAroundOperator": true,
    "powershell.codeFormatting.whitespaceAfterSeparator": true,
    "powershell.codeFormatting.whitespaceInsideBrace": true,
    "powershell.codeFormatting.whitespaceBetweenParameters": true,
    "powershell.codeFormatting.addWhitespaceAroundPipe": true,
    "powershell.codeFormatting.trimWhitespaceAroundPipe": true,
    "powershell.codeFormatting.ignoreOneLineBlock": true,
    "powershell.codeFormatting.alignPropertyValuePairs": true,
    "[powershell]": {
        "editor.formatOnSave": true,
    },

    // Sass
    "[scss]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode",
    },
}
