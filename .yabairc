#!/usr/bin/env sh

# Not in use

# See https://github.com/koekeishiya/yabai/wiki/Commands#automation-with-rules-and-signals
# and https://github.com/koekeishiya/yabai/blob/master/doc/yabai.asciidoc#rule
# and https://github.com/koekeishiya/yabai/blob/master/doc/yabai.asciidoc#signal

case $1 in
"")
    # global settings
    yabai -m config mouse_follows_focus          off
    yabai -m config focus_follows_mouse          off
    yabai -m config window_origin_display        default
    yabai -m config window_placement             second_child
    yabai -m config window_topmost               on
    yabai -m config window_shadow                on
    yabai -m config window_opacity               off
    yabai -m config window_opacity_duration      0.0
    yabai -m config active_window_opacity        1.0
    yabai -m config normal_window_opacity        0.40
    yabai -m config window_border                off
    yabai -m config window_border_width          6
    yabai -m config active_window_border_color   0xff775759
    yabai -m config normal_window_border_color   0xff555555
    yabai -m config insert_feedback_color        0xffd75f5f
    yabai -m config split_ratio                  0.50
    yabai -m config auto_balance                 off
    yabai -m config mouse_modifier               fn
    yabai -m config mouse_action1                move
    yabai -m config mouse_action2                resize
    yabai -m config mouse_drop_action            swap

    # general space settings
    yabai -m config layout                       bsp
    yabai -m config top_padding                  1
    yabai -m config bottom_padding               1
    yabai -m config left_padding                 1
    yabai -m config right_padding                1
    yabai -m config window_gap                   1

    # float system preferences
    yabai -m rule --add app="^System Preferences$" manage=off
    yabai -m rule --add app="^SystemÂ­einstellungen$" manage=off

    echo "yabai configuration loaded.."
    ;;
test)
    current_space=$(yabai -m query --spaces --space | jq '.index')
    echo "$current_space"
    yabai -m query --windows --space | jq '.[] | select(."is-visible" == false).id'

    jq '.[] | select(.minimized == 1).id' | \
    xargs -L1 -I{} sh -c ' {
        yabai -m window $1 --space $2
        yabai -m window $1 --deminimize
    } & ' sh {} $current_space
    ;;
*)
    echo "Unsupported param '$1'"
    ;;
esac

