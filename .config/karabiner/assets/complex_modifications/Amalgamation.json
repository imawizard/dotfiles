{
	"title": "Amalgamation extensions",
	"rules": [
		{
			"description": "[Amalgamation] Replace ⇪ with ctrl, C-c with ⎋ and C-[ with C-c everywhere",
			"manipulators": [
				{ "type": "basic", "from": { "key_code": "caps_lock",    "modifiers": { "optional":  ["any"         ] } }, "to": [{ "key_code": "left_control"                              }] },
				{ "type": "basic", "from": { "key_code": "i",            "modifiers": { "mandatory": ["left_control"] } }, "to": [{ "key_code": "escape"                                    }] },
				{ "type": "basic", "from": { "key_code": "open_bracket", "modifiers": { "mandatory": ["left_control"] } }, "to": [{ "key_code": "i",            "modifiers": "left_control" }] }
			]
		},
		{
			"description": "[Amalgamation] Numpad through C-⌘",
			"manipulators": [
				{ "type": "basic", "from": { "key_code": "7",                   "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_7"            }] },
				{ "type": "basic", "from": { "key_code": "8",                   "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_8"            }] },
				{ "type": "basic", "from": { "key_code": "9",                   "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_9"            }] },
				{ "type": "basic", "from": { "key_code": "0",                   "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_asterisk"     }] },

				{ "type": "basic", "from": { "key_code": "u",                   "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_4"            }] },
				{ "type": "basic", "from": { "key_code": "i",                   "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_5"            }] },
				{ "type": "basic", "from": { "key_code": "o",                   "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_6"            }] },
				{ "type": "basic", "from": { "key_code": "p",                   "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_plus"         }] },

				{ "type": "basic", "from": { "key_code": "j",                   "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_1"            }] },
				{ "type": "basic", "from": { "key_code": "k",                   "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_2"            }] },
				{ "type": "basic", "from": { "key_code": "l",                   "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_3"            }] },
				{ "type": "basic", "from": { "key_code": "semicolon",           "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_hyphen"       }] },

				{ "type": "basic", "from": { "key_code": "m",                   "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_0"            }] },
				{ "type": "basic", "from": { "key_code": "comma",               "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "w"                   }] },
				{ "type": "basic", "from": { "key_code": "period",              "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "e"                   }] },
				{ "type": "basic", "from": { "key_code": "slash",               "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "keypad_slash"        }] },

				{ "type": "basic", "from": { "key_code": "delete_or_backspace", "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "delete_or_backspace" }] },
				{ "type": "basic", "from": { "key_code": "return_or_enter",     "modifiers": { "mandatory": ["control", "left_command"] } }, "to": [{ "key_code": "return_or_enter"     }] }
			]
		},
		{
			"description": "[Amalgamation] Enable some Emacs meta key mappings everywhere",
			"manipulators": [
				{ "type": "basic", "from": { "key_code": "y", "modifiers": { "mandatory": ["option"], "optional": ["shift"] } }, "to": [{ "key_code": "right_arrow",         "modifiers": ["left_option"] }] },
				{ "type": "basic", "from": { "key_code": "n", "modifiers": { "mandatory": ["option"], "optional": ["shift"] } }, "to": [{ "key_code": "left_arrow",          "modifiers": ["left_option"] }] },
				{ "type": "basic", "from": { "key_code": "j", "modifiers": { "mandatory": ["option"]                        } }, "to": [{ "key_code": "delete_or_backspace", "modifiers": ["left_option"] }] },
				{ "type": "basic", "from": { "key_code": "h", "modifiers": { "mandatory": ["option"]                        } }, "to": [{ "key_code": "delete_forward",      "modifiers": ["left_option"] }] }
			]
		},
		{
			"description": "[Amalgamation] Map Right-Command to Hyper for Amethyst",
			"manipulators": [
				{ "type": "basic", "from": { "key_code": "c",                "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "c",               "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "v",                "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "v",               "modifiers": ["left_option", "left_command", "left_control"]               }] },

				{ "type": "basic", "from": { "key_code": "j",                "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "j",               "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "p",                "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "p",               "modifiers": ["left_option", "left_command", "left_control"]               }] },

				{ "type": "basic", "from": { "key_code": "comma",            "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "comma",           "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "period",           "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "period",          "modifiers": ["left_option", "left_command", "left_control"]               }] },

				{ "type": "basic", "from": { "key_code": "w",                "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "w",               "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "e",                "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "e",               "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "r",                "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "r",               "modifiers": ["left_option", "left_command", "left_control"]               }] },

				{ "type": "basic", "from": { "key_code": "a",                "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "a",               "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "s",                "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "s",               "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "d",                "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "d",               "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "f",                "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "f",               "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "g",                "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "g",               "modifiers": ["left_option", "left_command", "left_control"]               }] },

				{ "type": "basic", "from": { "key_code": "open_bracket",     "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "open_bracket",    "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "close_bracket",    "modifiers": { "mandatory": ["right_command"], "optional": ["shift"] } }, "to": [{ "key_code": "close_bracket",   "modifiers": ["left_option", "left_command", "left_control"]               }] },

				{ "type": "basic", "from": { "key_code": "1",                "modifiers": { "mandatory": ["right_command"]                        } }, "to": [{ "key_code": "keypad_1",        "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "2",                "modifiers": { "mandatory": ["right_command"]                        } }, "to": [{ "key_code": "keypad_2",        "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "3",                "modifiers": { "mandatory": ["right_command"]                        } }, "to": [{ "key_code": "keypad_3",        "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "4",                "modifiers": { "mandatory": ["right_command"]                        } }, "to": [{ "key_code": "keypad_4",        "modifiers": ["left_option", "left_command", "left_control"]               }] },

				{ "type": "basic", "from": { "key_code": "m",                "modifiers": { "mandatory": ["right_command"]                        } }, "to": [{ "key_code": "m",               "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "return_or_enter",  "modifiers": { "mandatory": ["right_command"]                        } }, "to": [{ "key_code": "return_or_enter", "modifiers": ["left_option", "left_command", "left_control"]               }] },
				{ "type": "basic", "from": { "key_code": "q",                "modifiers": { "mandatory": ["right_command"]                        } }, "to": [{ "key_code": "q",               "modifiers": ["left_option", "left_command", "left_control"]               }] },

				{ "type": "basic", "from": { "key_code": "return_or_enter",  "modifiers": { "mandatory": ["right_command", "shift"]               } }, "to": [{ "shell_command": "open -a 'iTerm'"                                                                        }] },
				{ "type": "basic", "from": { "key_code": "i",                "modifiers": { "mandatory": ["right_command"]                        } }, "to": [{ "key_code": "up_arrow",        "modifiers": ["left_control"]                                              }] },
				{ "type": "basic", "from": { "key_code": "i",                "modifiers": { "mandatory": ["right_command", "shift"]               } }, "to": [{ "key_code": "w",               "modifiers": ["left_command"]                                              }] },
				{ "type": "basic", "from": { "key_code": "non_us_backslash", "modifiers": { "mandatory": ["left_command"]                         } }, "to": [{ "key_code": "f11"                                                                                         }] }
			]
		},
		{
			"description": "[Amalgamation] Navigation with C-p/-n and C-f/-b in various apps",
			"manipulators": [
				{ "type": "basic", "from": { "key_code": "r", "modifiers": { "mandatory": ["control"] } }, "to": [{ "key_code": "up_arrow" }],
				"conditions": [{ "type": "frontmost_application_if", "bundle_identifiers": [
					"^com\\.apple\\.finder$",
					"^com\\.kapeli\\.dashdoc$",
					"^co\\.gitup\\.mac$",
					"^com\\.hicknhacksoftware\\.MacPass$",
					"^com\\.operasoftware\\.Opera$",
					"^com\\.apple\\.ActivityMonitor$",
					"^com\\.apple\\.AddressBook$",
					"^com\\.bohemiancoding\\.sketch3$"
				] }] },
				{ "type": "basic", "from": { "key_code": "l", "modifiers": { "mandatory": ["control"] } }, "to": [{ "key_code": "down_arrow" }],
				"conditions": [{ "type": "frontmost_application_if", "bundle_identifiers": [
					"^com\\.apple\\.finder$",
					"^com\\.kapeli\\.dashdoc$",
					"^co\\.gitup\\.mac$",
					"^com\\.hicknhacksoftware\\.MacPass$",
					"^com\\.operasoftware\\.Opera$",
					"^com\\.apple\\.ActivityMonitor$",
					"^com\\.apple\\.AddressBook$",
					"^com\\.bohemiancoding\\.sketch3$"
				] }] },
				{ "type": "basic", "from": { "key_code": "y", "modifiers": { "mandatory": ["control"] } }, "to": [{ "key_code": "right_arrow" }],
				"conditions": [{ "type": "frontmost_application_if", "bundle_identifiers": [
					"^com\\.apple\\.finder$",
					"^com\\.kapeli\\.dashdoc$",
					"^co\\.gitup\\.mac$",
					"^com\\.hicknhacksoftware\\.MacPass$",
					"^com\\.operasoftware\\.Opera$",
					"^com\\.apple\\.ActivityMonitor$",
					"^com\\.apple\\.AddressBook$",
					"^com\\.bohemiancoding\\.sketch3$"
				] }] },
				{ "type": "basic", "from": { "key_code": "n", "modifiers": { "mandatory": ["control"] } }, "to": [{ "key_code": "left_arrow" }],
				"conditions": [{ "type": "frontmost_application_if", "bundle_identifiers": [
					"^com\\.apple\\.finder$",
					"^com\\.kapeli\\.dashdoc$",
					"^co\\.gitup\\.mac$",
					"^com\\.hicknhacksoftware\\.MacPass$",
					"^com\\.operasoftware\\.Opera$",
					"^com\\.apple\\.ActivityMonitor$",
					"^com\\.apple\\.AddressBook$",
					"^com\\.bohemiancoding\\.sketch3$"
				] }] }
			]
		},
		{
			"description": "[Amalgamation] Custom hotkeys and navigation with C-a/-e in Finder",
			"manipulators": [
				{ "type": "basic", "from": { "key_code": "a",      "modifiers": { "mandatory": ["control"           ] } }, "to": [{ "key_code": "up_arrow",   "modifiers": ["left_option"                               ]                   }], "conditions": [{ "type": "frontmost_application_if", "bundle_identifiers": ["^com\\.apple\\.finder$"] }] },
				{ "type": "basic", "from": { "key_code": "d",      "modifiers": { "mandatory": ["control"           ] } }, "to": [{ "key_code": "down_arrow", "modifiers": ["left_option"                               ]                   }], "conditions": [{ "type": "frontmost_application_if", "bundle_identifiers": ["^com\\.apple\\.finder$"] }] },
				{ "type": "basic", "from": { "key_code": "slash",  "modifiers": { "mandatory": ["control"           ] } }, "to": [{ "key_code": "f1",         "modifiers": ["left_control", "left_shift", "left_command"]                   }], "conditions": [{ "type": "frontmost_application_if", "bundle_identifiers": ["^com\\.apple\\.finder$"] }] },
				{ "type": "basic", "from": { "key_code": "period", "modifiers": { "mandatory": ["control"           ] } }, "to": [{ "key_code": "f2",         "modifiers": ["left_control", "left_shift", "left_command"]                   }], "conditions": [{ "type": "frontmost_application_if", "bundle_identifiers": ["^com\\.apple\\.finder$"] }] },
				{ "type": "basic", "from": { "key_code": "slash",  "modifiers": { "mandatory": ["control", "command"] } }, "to": [{ "key_code": "f3",         "modifiers": ["left_control", "left_shift", "left_command"]                   }], "conditions": [{ "type": "frontmost_application_if", "bundle_identifiers": ["^com\\.apple\\.finder$"] }] },
				{ "type": "basic", "from": { "key_code": "period", "modifiers": { "mandatory": ["control", "command"] } }, "to": [{ "key_code": "f4",         "modifiers": ["left_control", "left_shift", "left_command"]                   }], "conditions": [{ "type": "frontmost_application_if", "bundle_identifiers": ["^com\\.apple\\.finder$"] }] },
				{ "type": "basic", "from": { "key_code": "u",      "modifiers": { "mandatory": ["control"           ] } }, "to": [{ "key_code": "f5",         "modifiers": ["left_control", "left_shift", "left_command"]                   }], "conditions": [{ "type": "frontmost_application_if", "bundle_identifiers": ["^com\\.apple\\.finder$"] }] },
				{ "type": "basic", "from": { "key_code": "o",      "modifiers": { "mandatory": ["control", "command"] } }, "to": [{ "shell_command": "osascript -e 'tell application \"Finder\" to tell front window to update every item'" }], "conditions": [{ "type": "frontmost_application_if", "bundle_identifiers": ["^com\\.apple\\.finder$"] }] }
			]
		},
		{
			"description": "[Amalgamation] Lock workstation",
			"manipulators": [
				{ "type": "basic", "from": { "key_code": "l", "modifiers": { "mandatory": ["option"] } }, "to": [{ "shell_command": "osascript -e 'tell application \"System Events\" to key code 12 using {control down, command down}'" }] }
			]
		}
	]
}
